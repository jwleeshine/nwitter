(this.webpackJsonpnwitter=this.webpackJsonpnwitter||[]).push([[0],{44:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var s=a(2),n=a.n(s),c=a(29),r=a.n(c),i=a(19),l=a(6),o=a(14),j=a(20),u=a(21);a(39),a(46),a(47);u.a.initializeApp({apiKey:"AIzaSyACkkHgtEy2t-3LCK1uEleA9Iu6da_nc1E",authDomain:"nwitter-dfe84.firebaseapp.com",projectId:"nwitter-dfe84",storageBucket:"nwitter-dfe84.firebasestorage.app",messagingSenderId:"223362557320",appId:"1:223362557320:web:b46547d0b56755c609063d"});const d=u.a,b=u.a.auth(),h=u.a.firestore(),m=u.a.storage();var p=a(1);var O=()=>{const[e,t]=Object(s.useState)(""),[a,n]=Object(s.useState)(""),[c,r]=Object(s.useState)(!0),[i,l]=Object(s.useState)(""),o=e=>{const{target:{name:a,value:s}}=e;"email"===a?t(s):"password"===a&&n(s)};return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{let t;t=c?await b.createUserWithEmailAndPassword(e,a):await b.signInWithEmailAndPassword(e,a)}catch(i){l(i.message)}},className:"container",children:[Object(p.jsx)("input",{name:"email",type:"email",placeholder:"Email",required:!0,value:e,onChange:o,className:"authInput"}),Object(p.jsx)("input",{name:"password",type:"password",placeholder:"Password",required:!0,value:a,onChange:o,className:"authInput"}),Object(p.jsx)("input",{type:"submit",value:c?"Create Account":"Log In",className:"authInput authSubmit"}),i&&Object(p.jsx)("span",{className:"authError",children:i})]}),Object(p.jsx)("span",{onClick:()=>r((e=>!e)),className:"authSwitch",children:c?"Sign In":"Create Account"})]})};var x=()=>{const e=async e=>{const{target:{name:t}}=e;let a;"google"===t?a=new d.auth.GoogleAuthProvider:"github"===t&&(a=new d.auth.GithubAuthProvider);await b.signInWithPopup(a)};return Object(p.jsxs)("div",{className:"authContainer",children:[Object(p.jsx)(o.a,{icon:j.c,color:"#04AAFF",size:"3x",style:{marginBottom:30}}),Object(p.jsx)(O,{}),Object(p.jsxs)("div",{className:"authBtns",children:[Object(p.jsxs)("button",{onClick:e,name:"google",className:"authBtn",children:["Continue with Google ",Object(p.jsx)(o.a,{icon:j.b})]}),Object(p.jsxs)("button",{onClick:e,name:"github",className:"authBtn",children:["Continue with Github ",Object(p.jsx)(o.a,{icon:j.a})]})]})]})},f=a(18);var g=e=>{let{nweetObj:t,isOwner:a}=e;const[n,c]=Object(s.useState)(!1),[r,i]=Object(s.useState)(t.text),l=()=>c((e=>!e));return Object(p.jsx)("div",{className:"nweet",children:n?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),await h.doc(`nweets/${t.id}`).update({text:r}),c(!1)},className:"container nweetEdit",children:[Object(p.jsx)("input",{onChange:e=>{const{target:{value:t}}=e;i(t)},value:r,required:!0,placeholder:"Edit your nweet",autoFocus:!0,className:"formInput"}),Object(p.jsx)("input",{type:"submit",value:"Update Nweet",className:"formBtn"})]}),Object(p.jsx)("button",{onClick:l,className:"formBtn cancelBtn",children:"Cancel"})]}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("h4",{children:t.text}),t.attachmentUrl&&Object(p.jsx)("img",{src:t.attachmentUrl,width:"50px",height:"50px"}),a&&Object(p.jsxs)("div",{className:"nweet__actions",children:[Object(p.jsx)("span",{onClick:async()=>{window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(await h.doc(`nweets/${t.id}`).delete(),""!==t.attachmentUrl&&await m.refFromURL(t.attachmentUrl).delete())},children:Object(p.jsx)(o.a,{icon:f.b})}),Object(p.jsx)("span",{onClick:l,children:Object(p.jsx)(o.a,{icon:f.a})})]})]})})},w=a(49);var y=e=>{let{userObj:t}=e;const[a,n]=Object(s.useState)(""),[c,r]=Object(s.useState)("");return Object(p.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),""===a)return;let s="";if(""!==c){const e=m.ref().child(`${t.uid}/${Object(w.a)()}`),a=await e.putString(c,"data_url");s=await a.ref.getDownloadURL()}const i={text:a,createdAt:Date.now(),creatorId:t.uid,attachmentUrl:s};await h.collection("nweets").add(i),n(""),r("")},className:"factoryForm",children:Object(p.jsxs)("div",{className:"factoryInput__container",children:[Object(p.jsx)("input",{className:"factoryInput__input",value:a,onChange:e=>{e.preventDefault();const{target:{value:t}}=e;n(t)},type:"text",placeholder:"What's on your mind?",maxLength:120}),Object(p.jsx)("input",{type:"submit",value:"\u2192",className:"factoryInput__arrow"})]})})};var v=e=>{let{userObj:t}=e;const[a,n]=Object(s.useState)([]);return Object(s.useEffect)((()=>{h.collection("nweets").orderBy("createdAt","desc").onSnapshot((e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));n(t)}))}),[]),Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)(y,{userObj:t}),Object(p.jsx)("div",{style:{marginTop:30},children:a.map((e=>Object(p.jsx)(g,{nweetObj:e,isOwner:e.creatorId===t.uid},e.id)))})]})};var N=e=>{let{userObj:t,refreshUser:a}=e;const n=Object(l.f)(),[c,r]=Object(s.useState)(t.displayName);return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),t.displayName!==c&&(await t.updateProfile({displayName:c}),a())},className:"profileForm",children:[Object(p.jsx)("input",{onChange:e=>{const{target:{value:t}}=e;r(t)},type:"text",placeholder:"Display name",value:c,autoFocus:!0,className:"formInput"}),Object(p.jsx)("input",{type:"submit",value:"Update Profile",className:"formBtn",style:{marginTop:10}})]}),Object(p.jsx)("span",{className:"formBtn cancelBtn logOut",onClick:()=>{b.signOut(),n.push("/")},children:"Log Out"})]})};var S=e=>{let{userObj:t}=e;return Object(p.jsx)("nav",{children:Object(p.jsxs)("ul",{style:{display:"flex",justifyContent:"center",marginTop:50},children:[Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/",style:{marginRight:10},children:Object(p.jsx)(o.a,{icon:j.c,color:"#04AAFF",size:"2x"})})}),Object(p.jsx)("li",{children:Object(p.jsxs)(i.b,{to:"/profile",style:{marginLeft:10,display:"flex",flexDirection:"column",alignItems:"center",fontSize:12},children:[Object(p.jsx)(o.a,{icon:f.c,color:"#04AAFF",size:"2x"}),Object(p.jsx)("span",{style:{marginTop:10},children:t.displayName?`${t.displayName}\uc758 Profile`:"Profile"})]})})]})})};var C=e=>{let{isLoggedIn:t,userObj:a,refreshUser:s}=e;return Object(p.jsxs)(i.a,{children:[t&&Object(p.jsx)(S,{userObj:a}),Object(p.jsx)(l.c,{children:t?Object(p.jsxs)("div",{style:{maxWidth:890,width:"100%",margin:"0 auto",marginTop:80,display:"flex",justifyContent:"center"},children:[Object(p.jsx)(l.a,{exact:!0,path:"/",children:Object(p.jsx)(v,{userObj:a})}),Object(p.jsx)(l.a,{exact:!0,path:"/profile",children:Object(p.jsx)(N,{refreshUser:s,userObj:a})})]}):Object(p.jsx)(l.a,{exact:!0,path:"/",children:Object(p.jsx)(x,{})})})]})};var I=function(){const[e,t]=Object(s.useState)(!1),[a,n]=Object(s.useState)(null);return Object(s.useEffect)((()=>{b.onAuthStateChanged((e=>{n(!!e&&{uid:e.uid,displayName:e.displayName,updateProfile:t=>e.updateProfile(t)}),t(!0)}))}),[]),Object(p.jsx)(p.Fragment,{children:e?Object(p.jsx)(C,{refreshUser:()=>{const e=b.currentUser;n({uid:e.uid,displayName:e.displayName,updateProfile:t=>e.updateProfile(t)})},isLoggedIn:Boolean(a),userObj:a}):"initializing..."})};a(44);r.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(I,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.4e16dadd.chunk.js.map